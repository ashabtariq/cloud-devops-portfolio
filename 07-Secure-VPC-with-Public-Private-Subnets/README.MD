
ğŸ” Secure VPC with Bastion & Private EC2 (Terraform)

ğŸ“Œ Project Overview
This project provisions a secure AWS environment using Terraform.
It demonstrates a best-practice VPC setup with public and private subnets, a bastion host for SSH access, and a private EC2 instance accessible only through the bastion.

âœ… Ideal for cloud security labs, DevOps practice, or portfolio projects.

ğŸ—ï¸ Architecture
~~~
                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                   â”‚          VPC (10.0.0.0/16)  â”‚
                   â”‚                             â”‚
                   â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
                   â”‚   â”‚  Public Subnet       â”‚  â”‚
                   â”‚   â”‚  (10.0.0.0/24)       â”‚  â”‚
                   â”‚   â”‚                      â”‚  â”‚
Internet  <â”€â”€â”€â”€â”€â”€â–º â”‚   â”‚ IGW â”€â”€ NAT GW        â”‚  â”‚
                   â”‚   â”‚   â”‚                  â”‚  â”‚
                   â”‚   â”‚ Bastion Host (EC2)   â”‚  â”‚
                   â”‚   â”‚   [SSH from Your IP] â”‚  â”‚
                   â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
                   â”‚                             â”‚
                   â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
                   â”‚   â”‚  Private Subnet      â”‚  â”‚
                   â”‚   â”‚  (10.0.1.0/24)       â”‚  â”‚
                   â”‚   â”‚                      â”‚  â”‚
                   â”‚   â”‚ Private EC2          â”‚  â”‚
                   â”‚   â”‚ [SSH only from       â”‚  â”‚
                   â”‚   â”‚  Bastion SG]         â”‚  â”‚
                   â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
                   â”‚                             â”‚
                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
~~~



Security Groups
- Bastion SG â†’ SSH from your IP
- Private EC2 SG â†’ SSH only from Bastion SG

ğŸ”’ Security Highlights
- No direct SSH access to private EC2 (must go through bastion).
- Public access restricted to your IP address only.
- Outbound traffic allowed, inbound locked down with least privilege


ğŸ“‚ Files

~~~

â”œâ”€â”€ main.tf       # Terraform code (VPC, Subnets, IGW, NAT, EC2, SGs)
â”œâ”€â”€ variables.tf  # (optional) variables file if you parameterize
â”œâ”€â”€ outputs.tf    # (optional) useful outputs (bastion IP, private IPs)
â””â”€â”€ README.md     # Project documentation
~~~


ğŸš€ Deployment Steps

1ï¸âƒ£ Prerequisites
- Terraform installed
- AWS CLI configured (aws configure)
- Existing SSH keypair ~~~ (~/.ssh/id_rsa.pub or update path in code) ~~~

2ï¸âƒ£ Initialize Terraform
~~~
terraform init
~~~

3ï¸âƒ£ Plan Infrastructure
~~~
terraform plan -out tfplan
~~~

4ï¸âƒ£ Apply Infrastructure
~~~
terraform apply tfplan
~~~

ğŸ”‘ Accessing Instances
Bastion Host (Public Subnet)
~~~
ssh -i ~/.ssh/id_rsa ubuntu@<BASTION_PUBLIC_IP>
~~~

Private EC2 (via Bastion)
~~~
ssh -i ~/.ssh/id_rsa -J ubuntu@<BASTION_PUBLIC_IP> ubuntu@<PRIVATE_EC2_IP>
~~~


ğŸ§¹ Cleanup

Destroy resources to avoid charges:
~~~
terraform destroy
~~~


ğŸ·ï¸ Tags

AWS Terraform Cloud Security Bastion Host VPC DevOps


âœï¸ Author
Ashab Tariq
Cloud & DevOps Enthusiast | AWS | Terraform | Security Labs
